name: SCraping

on:
  schedule:
    - cron: "0 * * * *"
  # Allow running manually
  workflow_dispatch:

jobs:

  scrape:
    name: "Scrap all sites"
    runs-on: "ubuntu-20.04"
    steps:
      - uses: "actions/checkout@v2"
      - uses: actions/setup-go@v1
      - name: "Run"
        run: go run ./jobs_scaper/entrypoints/single/
        env:
          AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
          AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          AWS_REGION: ${{ secrets.AWS_REGION }}
          IAM_ROLE: ${{ secrets.SCRAPER_IAM_ROLE }}
          RESULTS_BUCKET_NAME: ${{ secrets.SCRAPER_RESULTS_BUCKET_NAME }}
